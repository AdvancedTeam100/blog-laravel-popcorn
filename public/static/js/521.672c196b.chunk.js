"use strict";(self.webpackChunkreact_typescript_redux_mui_responsive=self.webpackChunkreact_typescript_redux_mui_responsive||[]).push([[521],{8521:function(e,t,n){n.r(t);var r=n(4942),a=n(3433),i=n(9439),l=n(2791),s=n(9434),o=n(7689),u=n(789),d=n(456),c=n(7892),x=n.n(c),p=(n(5884),n(6889)),Z=n(8870),h=n(890),m=n(7621),f=n(9504),v=n(3044),j=n(3400),b=n(6151),g=n(3767),y=n(8550),_=n(9585),S=n(4721),w=n(8096),C=n(4536),k=n(5523),P=n(991),W=n(829),z=n(7478),E=n(5022),Y=n(1889),D=n(493),q=n(4852),I=n(9900),M=n(4454),O=n(7133),R=n(8820),J=n(7778),K=n(7511),U=n(6872),A=n(7080),L=n(184);t.default=function(){var e=(0,o.UO)().id,t=(0,o.s0)(),n=(0,s.I0)(),c=(0,s.v9)((function(e){return e.blog.all_categories})),N=(0,s.v9)((function(e){return e.blog.all_groups})),B=(0,s.v9)((function(e){return e.auth.user})),F=(0,s.v9)((function(e){return e.users.current_user})),G=(0,l.useRef)(null),T=(0,u.Z)(["usertoken"]),V=(0,i.Z)(T,3),H=V[0],Q=(V[1],V[2],H.usertoken),X=(0,l.useState)(""),$=(0,i.Z)(X,2),ee=$[0],te=$[1],ne=(0,l.useState)(""),re=(0,i.Z)(ne,2),ae=re[0],ie=re[1],le=(0,l.useState)(""),se=(0,i.Z)(le,2),oe=se[0],ue=se[1],de=(0,l.useState)("1990-01-01"),ce=(0,i.Z)(de,2),xe=ce[0],pe=ce[1],Ze=(0,l.useState)(""),he=(0,i.Z)(Ze,2),me=(he[0],he[1],(0,l.useState)("")),fe=(0,i.Z)(me,2),ve=fe[0],je=fe[1],be=(0,l.useState)(""),ge=(0,i.Z)(be,2),ye=ge[0],_e=ge[1],Se=(0,l.useState)(""),we=(0,i.Z)(Se,2),Ce=we[0],ke=we[1],Pe=(0,l.useState)("2"),We=(0,i.Z)(Pe,2),ze=We[0],Ee=We[1],Ye=(0,l.useState)("1"),De=(0,i.Z)(Ye,2),qe=De[0],Ie=De[1],Me=(0,l.useState)(""),Oe=(0,i.Z)(Me,2),Re=Oe[0],Je=Oe[1],Ke=(0,l.useState)(""),Ue=(0,i.Z)(Ke,2),Ae=Ue[0],Le=Ue[1],Ne=(0,l.useState)(""),Be=(0,i.Z)(Ne,2),Fe=Be[0],Ge=Be[1],Te=(0,l.useState)(""),Ve=(0,i.Z)(Te,2),He=Ve[0],Qe=Ve[1],Xe=(0,l.useState)(""),$e=(0,i.Z)(Xe,2),et=$e[0],tt=$e[1],nt=(0,l.useState)("1"),rt=(0,i.Z)(nt,2),at=rt[0],it=rt[1],lt=(0,l.useState)([]),st=(0,i.Z)(lt,2),ot=st[0],ut=st[1],dt=(0,l.useState)([]),ct=(0,i.Z)(dt,2),xt=ct[0],pt=ct[1],Zt=(0,l.useState)([]),ht=(0,i.Z)(Zt,2),mt=ht[0],ft=ht[1],vt=(0,l.useState)(""),jt=(0,i.Z)(vt,2),bt=jt[0],gt=jt[1],yt=(0,l.useState)(null),_t=(0,i.Z)(yt,2),St=_t[0],wt=_t[1],Ct=(0,l.useState)([]),kt=(0,i.Z)(Ct,2),Pt=kt[0],Wt=kt[1],zt=(0,l.useState)([]),Et=(0,i.Z)(zt,2),Yt=Et[0],Dt=Et[1],qt=(0,l.useState)([]),It=(0,i.Z)(qt,2),Mt=It[0],Ot=It[1],Rt=(0,l.useState)([]),Jt=(0,i.Z)(Rt,2),Kt=Jt[0],Ut=Jt[1],At=(0,l.useState)(""),Lt=(0,i.Z)(At,2),Nt=Lt[0],Bt=Lt[1],Ft=(0,l.useState)(null),Gt=(0,i.Z)(Ft,2),Tt=Gt[0],Vt=Gt[1],Ht=(0,l.useState)(!0),Qt=(0,i.Z)(Ht,2),Xt=Qt[0],$t=Qt[1],en=0;if(Q){var tn=(0,d.Z)(Q);en=tn?parseInt(tn.role_id,10):4}(0,l.useEffect)((function(){n((0,J.VK)(e))}),[]),(0,l.useEffect)((function(){2==en&&($t(!1),Ee("3"))}),[]),(0,l.useEffect)((function(){n((0,U.tG)())}),[]),(0,l.useEffect)((function(){if(F){te(F.name),ie(F.read_name),ue(F.email),pe(F.birthday),Bt("".concat(A.KB,"upload/images/").concat(F.avatar)),gt(F.group_id),je(F.user_id),_e(F.phone_number),ke(F.memo),Ee(F.role_id),"android"==F.phone_device?Ie("1"):Ie("2"),Je(F.ninetieth_life),Le(F.work_life),Ge(F.die_life),Qe(F.healthy_life),tt(F.average_life),it(F.status);var e=JSON.parse(null===F||void 0===F?void 0:F.allowed_categories);Ut(e[F.group_id]),Dt(e[1]),Ot(e[2])}}),[F]),(0,l.useEffect)((function(){if(N){var e=N.filter((function(e){return 1!=e.id&&2!=e.id}));N.forEach((function(e){if(e.id==(null===F||void 0===F?void 0:F.group_id))return wt(e),0})),Wt(e)}2==en&&B&&gt(null===B||void 0===B?void 0:B.group_id)}),[N]),(0,l.useEffect)((function(){c&&(ut(c[1]),pt(c[2]),ft(c["".concat(bt)]))}),[c]);var nn=function(e){var t=e.target.value;e.target.checked?(Dt((function(e){return[].concat((0,a.Z)(e),[t])})),console.log(Yt)):Dt((function(e){return e.filter((function(e){return e!==t}))}))},rn=function(e){var t=e.target.value;e.target.checked?(Ot((function(e){return[].concat((0,a.Z)(e),[t])})),console.log(Yt)):Ot((function(e){return e.filter((function(e){return e!==t}))}))},an=function(e){var t=e.target.value,n=e.target.checked;Ut(n?function(e){return[].concat((0,a.Z)(e),[t])}:function(e){return e.filter((function(e){return e!==t}))})};return(0,L.jsxs)(Z.Z,{sx:{width:{xs:"100%",ms:"90%",md:"80%",lg:"50%"},mb:2},children:[(0,L.jsx)(h.Z,{sx:{fontSize:"2rem",mt:1,mb:1,color:K.t.main,fontWeight:"600"},variant:"h4",children:"\u30e6\u30fc\u30b6\u30fc\u306e\u7de8\u96c6"}),(0,L.jsx)(m.Z,{sx:{border:"solid 2px initial",borderRadius:"10px",width:"100%"},children:(0,L.jsx)(f.Z,{children:(0,L.jsxs)("form",{onSubmit:function(a){a.preventDefault();var i=new FormData;Tt&&i.append("avatar",Tt),i.append("name",ee),i.append("read_name",ae),i.append("email",oe),i.append("birthday",xe),i.append("user_id",ve),i.append("phone_number",ye),i.append("phone_device",qe),i.append("role_id",ze),i.append("group_id",bt),i.append("status","1"),i.append("memo",Ce),i.append("ninetieth_life",Re),i.append("work_life",Ae),i.append("die_life",Fe),i.append("healthy_life",He),i.append("average_life",et),i.append("status",at);var l=null;1==en&&"2"==ze?l={2:Mt}:(1==en&&"3"==ze||2==en)&&(l=(0,r.Z)({1:Yt},bt,Kt)),i.append("allowed_categories",JSON.stringify(l)),"2"==ze||"2"==F.role_id?n((0,J.Wd)(t,i,e)):n((0,J.JW)(t,i,e))},children:[(0,L.jsxs)(Z.Z,{sx:{position:"relative",width:130,height:130,m:"auto",p:0,justifyContent:"center"},children:[(0,L.jsx)(v.Z,{sx:{width:130,height:130,m:"auto",p:0,justifyContent:"center"},src:Nt||""}),(0,L.jsxs)(j.Z,{id:"edit-avatar-icon",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},onClick:function(){G.current&&G.current.click()},children:[(0,L.jsxs)(b.Z,{variant:"contained",component:"label",sx:{display:"none"},children:["Avatar",(0,L.jsx)("input",{ref:G,id:"avatar-upload",type:"file",onChange:function(e){var t,n=null===(t=e.target.files)||void 0===t?void 0:t[0];n?"image"===n.type.split("/")[0]?(Bt(URL.createObjectURL(n)),Vt(n)):console.error("Invalid file type. Please select an image file."):Bt("")},accept:"image/*",style:{display:"none"}})]}),(0,L.jsx)(R.Z,{sx:{width:"40px",height:"40px"}})]})]}),(0,L.jsxs)(g.Z,{spacing:2,direction:"row",sx:{mb:4,mt:4},children:[(0,L.jsx)(y.Z,{type:"text",variant:"outlined",color:"primary",label:"\u540d\u524d",onChange:function(e){return te(e.target.value)},style:{borderRadius:"10px"},value:ee,fullWidth:!0,required:!0}),(0,L.jsx)(y.Z,{type:"text",variant:"outlined",color:"primary",label:"\u8aad\u307f",onChange:function(e){return ie(e.target.value)},value:ae,fullWidth:!0,required:!0})]}),Xt&&"2"!=(null===F||void 0===F?void 0:F.role_id)&&(0,L.jsxs)(m.Z,{sx:{marginTop:"20px",border:"solid 1px #2196f3"},children:[(0,L.jsx)(_.Z,{title:"\u30e6\u30fc\u30b6\u30fc\u6a29\u9650",sx:{fontSize:"16px"}}),(0,L.jsx)(S.Z,{sx:{border:"1px dotted #2196f3"}}),(0,L.jsx)(f.Z,{children:(0,L.jsx)(w.Z,{children:(0,L.jsxs)(C.Z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:ze,onChange:function(e){Ee(e.target.value),bt||ft([])},children:[(0,L.jsx)(k.Z,{value:"2",control:(0,L.jsx)(P.Z,{}),label:"\u7ba1\u7406\u8005\u6a29\u9650(\u30b0\u30eb\u30fc\u30d7\u30ea\u30fc\u30c0\u30fc)"}),(0,L.jsx)(k.Z,{value:"3",control:(0,L.jsx)(P.Z,{}),label:"\u95b2\u89a7\u306e\u307f\u30e6\u30fc\u30b6\u30fc"})]})})})]}),"3"==ze&&1==en&&(0,L.jsxs)(w.Z,{sx:{mt:4},fullWidth:!0,children:[(0,L.jsx)(W.Z,{id:"demo-simple-select-label",children:"\u30b0\u30eb\u30fc\u30d7\u3092\u9078\u629e"}),(0,L.jsx)(z.Z,{labelId:"group-select-label",id:"user-group-select",value:bt,label:"\u30b0\u30eb\u30fc\u30d7\u3092\u9078\u629e",onChange:function(e){gt(e.target.value);var t=null;Pt.forEach((function(n){n.id!=e.target.value||(t=n)})),wt(t),c&&ft(c[e.target.value])},required:!0,children:null===Pt||void 0===Pt?void 0:Pt.map((function(e){return(0,L.jsx)(E.Z,{value:e.id,children:e.name},e.id+1e3)}))})]}),(0,L.jsx)(h.Z,{sx:{mt:4,mb:1,ml:1},variant:"body1",children:"\u751f\u5e74\u6708\u65e5"}),(0,L.jsx)(Z.Z,{sx:{mb:4,width:"100%"},children:(0,L.jsx)(p.M,{format:"YYYY/MM/DD",onChange:function(e){var t=x()(e).format("YYYY-MM-DD");console.log(t),pe(t)},value:x()(xe)})}),(0,L.jsxs)(Y.ZP,{container:!0,spacing:2,children:[(0,L.jsx)(Y.ZP,{item:!0,xs:12,md:6,children:(0,L.jsx)(y.Z,{type:"email",variant:"outlined",color:"primary",label:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",onChange:function(e){return ue(e.target.value)},value:oe,fullWidth:!0,required:!0,sx:{mb:4}})}),(0,L.jsx)(Y.ZP,{item:!0,xs:12,md:6,children:(0,L.jsx)(y.Z,{type:"phone",variant:"outlined",color:"primary",label:"\u96fb\u8a71\u756a\u53f7",onChange:function(e){return _e(e.target.value)},value:ye,fullWidth:!0,required:!0,sx:{mb:4}})})]}),(0,L.jsx)(Y.ZP,{container:!0,spacing:2,children:(0,L.jsx)(Y.ZP,{item:!0,xs:12,md:6,children:(0,L.jsx)(y.Z,{type:"text",variant:"outlined",color:"primary",label:"\u30ed\u30b0\u30a4\u30f3ID",onChange:function(e){return je(e.target.value)},value:ve,fullWidth:!0,required:!0,sx:{mb:4}})})}),(0,L.jsxs)(m.Z,{sx:{mb:4,border:"solid 1px #2196f3"},children:[(0,L.jsx)(_.Z,{title:"\u4f7f\u7528\u30b9\u30de\u30db\u7aef\u672b"}),(0,L.jsx)(S.Z,{sx:{border:"1px dotted #2196f3"}}),(0,L.jsx)(f.Z,{children:(0,L.jsx)(w.Z,{children:(0,L.jsxs)(C.Z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:qe,onChange:function(e){Ie(e.target.value)},children:[(0,L.jsx)(k.Z,{value:"1",control:(0,L.jsx)(P.Z,{}),label:"android"}),(0,L.jsx)(k.Z,{value:"2",control:(0,L.jsx)(P.Z,{}),label:"iPhone"})]})})})]}),(0,L.jsx)(y.Z,{type:"text",variant:"outlined",color:"primary",label:"\u30e1\u30e2\u6b04\u3001 \u8077\u696d\u3001 \u6027\u683c\u306a\u3069",onChange:function(e){return ke(e.target.value)},value:Ce,multiline:!0,fullWidth:!0,rows:4,sx:{mb:4}}),(0,L.jsxs)(m.Z,{sx:{mb:4,border:"solid 1px #2196f3"},children:[(0,L.jsx)(_.Z,{title:"\u6b8b\u308a\u306e\u5bff\u547d\u8a2d\u5b9a"}),(0,L.jsx)(S.Z,{sx:{border:"1px dotted #2196f3"}}),(0,L.jsx)(f.Z,{children:(0,L.jsxs)(D.Z,{children:[(0,L.jsxs)(q.ZP,{sx:{padding:0,margin:0},children:[(0,L.jsx)(I.Z,{primary:"\u30fb\u4eba\u751f\u306e9\u5272\u304c\u78ba\u5b9a\u3059\u308b(30\u6b73)\u307e\u3067"}),(0,L.jsx)(y.Z,{type:"number",label:"",size:"small",sx:{width:"70px"},value:Re,onChange:function(e){return Je(e.target.value)},inputProps:{min:0,max:999}}),(0,L.jsxs)(h.Z,{variant:"h6",sx:{pl:1},children:[" ","\u5e74"]})]}),(0,L.jsx)(S.Z,{sx:{mt:1,mb:1}}),(0,L.jsxs)(q.ZP,{sx:{padding:0,margin:0},children:[(0,L.jsx)(I.Z,{primary:"\u30fb\u52b4\u50cd\u5bff\u547d\u307e\u3067\u5f8c"}),(0,L.jsx)(y.Z,{type:"number",label:"",size:"small",sx:{width:"70px"},value:Ae,onChange:function(e){return Le(e.target.value)},inputProps:{min:0,max:999}}),(0,L.jsxs)(h.Z,{variant:"h6",sx:{pl:1},children:[" ","\u5e74"]})]}),(0,L.jsx)(S.Z,{sx:{mt:1,mb:1}}),(0,L.jsxs)(q.ZP,{sx:{padding:0,margin:0},children:[(0,L.jsx)(I.Z,{primary:"\u30fb\u6b7b\u3093\u3067\u3044\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u65e5\u307e\u3067"}),(0,L.jsx)(y.Z,{type:"number",label:"",size:"small",sx:{width:"70px"},value:Fe,onChange:function(e){return Ge(e.target.value)},inputProps:{min:0,max:999}}),(0,L.jsxs)(h.Z,{variant:"h6",sx:{pl:1},children:[" ","\u5e74"]})]}),(0,L.jsx)(S.Z,{sx:{mt:1,mb:1}}),(0,L.jsxs)(q.ZP,{sx:{padding:0,margin:0},children:[(0,L.jsx)(I.Z,{primary:"\u30fb\u5065\u5eb7\u5bff\u547d\u307e\u3067\u5f8c"}),(0,L.jsx)(y.Z,{type:"number",label:"",size:"small",sx:{width:"70px"},value:He,onChange:function(e){return Qe(e.target.value)},inputProps:{min:0,max:999}}),(0,L.jsxs)(h.Z,{variant:"h6",sx:{pl:1},children:[" ","\u5e74"]})]}),(0,L.jsx)(S.Z,{sx:{mt:1,mb:1}}),(0,L.jsxs)(q.ZP,{sx:{padding:0,margin:0},children:[(0,L.jsx)(I.Z,{primary:"\u30fb\u5e73\u5747\u5bff\u547d\u307e\u3067\u5f8c"}),(0,L.jsx)(y.Z,{type:"number",label:"",size:"small",sx:{width:"70px"},value:et,onChange:function(e){return tt(e.target.value)},inputProps:{min:0,max:999}}),(0,L.jsxs)(h.Z,{variant:"h6",sx:{pl:1},children:[" ","\u5e74"]})]}),(0,L.jsx)(S.Z,{sx:{mt:1,mb:1}})]})})]}),function(){var e=!1;return"3"==ze&&mt&&(e=!0),e}()&&(0,L.jsxs)(m.Z,{sx:{mb:4,border:"solid 1px #2196f3"},children:[(0,L.jsx)(_.Z,{title:(2==en?"\u79c1\u306e":null===St||void 0===St?void 0:St.name)+"\u30b0\u30eb\u30fc\u30d7\u5185\u306e\u30ab\u30c6\u30b4\u30ea\u95b2\u89a7\u6a29\u9650"}),(0,L.jsx)(S.Z,{sx:{border:"1px dotted #2196f3"}}),(0,L.jsx)(f.Z,{children:null===mt||void 0===mt?void 0:mt.map((function(e){return(0,L.jsx)(k.Z,{control:(0,L.jsx)(M.Z,{checked:Kt.includes("".concat(e.id)),onChange:an,value:e.id}),label:e.name},e.id)}))})]}),"3"==ze&&(0,L.jsxs)(m.Z,{sx:{mb:4,border:"solid 1px #2196f3"},children:[(0,L.jsx)(_.Z,{title:"\u5168\u4f53\u5171\u901a\u30b0\u30eb\u30fc\u30d7 \u30101\u3011 \u5185\u306e\u30ab\u30c6\u30b4\u30ea\u95b2\u89a7\u6a29\u9650"}),(0,L.jsx)(S.Z,{sx:{border:"1px dotted #2196f3"}}),(0,L.jsx)(f.Z,{children:null===ot||void 0===ot?void 0:ot.map((function(e){return(0,L.jsx)(k.Z,{control:(0,L.jsx)(M.Z,{checked:Yt.includes("".concat(e.id)),onChange:nn,value:e.id}),label:e.name},e.id)}))})]}),"2"==ze&&(0,L.jsxs)(m.Z,{sx:{mb:4,border:"solid 1px #2196f3"},children:[(0,L.jsx)(_.Z,{title:"\u5168\u4f53\u5171\u901a\u30b0\u30eb\u30fc\u30d7 \u30102\u3011 \u5185\u306e\u30ab\u30c6\u30b4\u30ea\u95b2\u89a7\u6a29\u9650"}),(0,L.jsx)(S.Z,{sx:{border:"1px dotted #2196f3"}}),(0,L.jsx)(f.Z,{children:null===xt||void 0===xt?void 0:xt.map((function(e){return(0,L.jsx)(k.Z,{control:(0,L.jsx)(M.Z,{checked:null===Mt||void 0===Mt?void 0:Mt.includes("".concat(e.id)),onChange:rn,value:e.id}),label:e.name},e.id)}))})]}),(0,L.jsxs)(Z.Z,{sx:{ml:0,mb:2},children:[(0,L.jsx)(O.Z,{id:"demo-radio-buttons-group-label",sx:{fontSize:"1.5rem",ml:1,fontWeight:400},children:"\u30b9\u30c6\u30fc\u30bf\u30b9"}),(0,L.jsx)(m.Z,{sx:{mt:2},children:(0,L.jsx)(f.Z,{children:(0,L.jsxs)(C.Z,{"aria-labelledby":"status-radio-buttons-group-label",value:at,name:"radio-buttons-group",onChange:function(e){it(e.target.value)},sx:{ml:2},children:[(0,L.jsx)(k.Z,{value:"1",control:(0,L.jsx)(P.Z,{}),label:"OK",defaultChecked:!0}),(0,L.jsx)(k.Z,{value:"2",control:(0,L.jsx)(P.Z,{}),label:"\u4e00\u6642\u505c\u6b62"}),(0,L.jsx)(k.Z,{value:"3",control:(0,L.jsx)(P.Z,{}),label:"\u30d6\u30ed\u30c3\u30af"})]})})})]}),(0,L.jsx)(b.Z,{variant:"outlined",color:"primary",type:"submit",sx:{textAlign:"right",mb:2,float:"right"},children:"\u767b\u9332\u3059\u308b"})]})})})]})}}}]);
//# sourceMappingURL=521.672c196b.chunk.js.map